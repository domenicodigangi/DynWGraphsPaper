name: eMid_analysis

#conda_env: config\conda_env.yaml

entry_points:

  load_and_log_data: 
    command: "python load_and_log_data.py"

  estimate_sequence_bin_models:
    parameters: 
      bin_or_w: {type: string, default: "bin"}
    command: "python run_estimates_on_eMid_vs_eonia_and_prev_t.py --bin_or_w {bin_or_w} --max_opt_iter 21"


  estimate_single_model:
    parameters:
      size_beta_t: {type: string, default: "0"}
      beta_tv: {type: float, default: 0}
      size_phi_t: {type: string, default: "2N"}
      phi_tv: {type: float, default: 1}
      bin_or_w: {type: string, default: "bin"}
      max_opt_iter: {type: float, default: 3000}
      unit_meas: {type: float, default: 10000.0}
      train_fract: {type: float, default: 0.8}
      regressor_name: {type: string, default: "eonia"}
      prev_mod_art_uri: {type: uri, default: none://}
      opt_n: {type: string, default: ADAMHD}

    command: "python estimate_single_model_emid.py  --size_phi_t {size_phi_t} --phi_tv {phi_tv} --size_beta_t {size_beta_t} --beta_tv {beta_tv} --bin_or_w {bin_or_w} --max_opt_iter {max_opt_iter} --unit_meas {unit_meas} --train_fract {train_fract} --regressor_name {regressor_name} --prev_mod_art_uri {prev_mod_art_uri} --opt_n {opt_n} "


  estimate_all_models_same_reg:
    parameters:
      bin_or_w: {type: string}
      regressor_name: {type: string}
      max_opt_iter: {type: float, default: 3000}
      unit_meas: {type: float, default: 10000.0}
      train_fract: {type: float, default: 0.8}
  
    command: "python estimate_all_models_same_reg.py  --bin_or_w {bin_or_w} --max_opt_iter {max_opt_iter} --unit_meas {unit_meas} --train_fract {train_fract} --regressor_name {regressor_name}"

    # mlflow run -e estimate_all_models_same_reg.py --no-conda --experiment-name "emid runs paper" . -P bin_or_w=bin -P regressor_name=eonia
    # mlflow run -e estimate_all_models_same_reg.py --no-conda --experiment-name "emid runs paper" . -P bin_or_w=w -P regressor_name=eonia

    # mlflow run -e estimate_all_models_same_reg.py --no-conda --experiment-name "emid runs paper" . -P bin_or_w=bin -P regressor_name=Atm1 
    # mlflow run -e estimate_all_models_same_reg.py --no-conda --experiment-name "emid runs paper" . -P bin_or_w=w -P regressor_name=logYtm1 
    
    # mlflow run -e estimate_all_models_same_reg.py --no-conda --experiment-name "emid runs paper" . -P bin_or_w=bin -P regressor_name="Atm1_eonia"     
    # mlflow run -e estimate_all_models_same_reg.py --no-conda --experiment-name "emid runs paper" . -P bin_or_w=w -P regressor_name="logYtm1_eonia" 



  estimate_all_regressors_comb_emid:
    parameters:
      max_opt_iter: {type: float, default: 3000}
      unit_meas: {type: float, default: 10000.0}
      train_fract: {type: float, default: 0.8}
      inds_to_run: {type: string, default: ""}
      init_sd_type: {type: string, default: "est_ss_before"}
      
    command: "python estimate_all_regressors_comb_emid.py  --max_opt_iter {max_opt_iter} --unit_meas {unit_meas} --train_fract {train_fract} "


  
# mlflow run -e estimate_all_regressors_comb_emid.py --no-conda --experiment-name "emid est paper last" . -P init_sd_type=unc_mean -P n_jobs=5

# evaluate models out of sample
# mlflow run -e evaluate_models_out_of_sample.py --no-conda  .