name: eMid_analysis

#conda_env: config\conda_env.yaml

entry_points:

  load_and_log_data: 
    command: "python load_and_log_data.py"

  estimate_sequence_bin_models:
    parameters: 
      bin_or_w: {type: string, default: "bin"}
    command: "python run_estimates_on_eMid_vs_eonia_and_prev_t.py --bin_or_w {bin_or_w} --max_opt_iter 21"


  estimate_single_model:
    parameters:
      size_beta_t: {type: string, default: "0"}
      beta_tv: {type: float, default: 0}
      bin_or_w: {type: string, default: "bin"}
      max_opt_iter: {type: float, default: 15000}
      unit_meas: {type: float, default: 10000.0}
      train_fract: {type: float, default: 0.75}
      regressor_name: {type: string, default: "eonia"}
      prev_mod_art_uri: {type: uri, default: none://}
      opt_n: {type: string, default: ADAM}

    command: "python estimate_single_model_emid.py  --size_beta_t {size_beta_t} --bin_or_w {bin_or_w} --max_opt_iter {max_opt_iter} --unit_meas {unit_meas} --train_fract {train_fract} --regressor_name {regressor_name} --prev_mod_art_uri {prev_mod_art_uri} --opt_n {opt_n} --beta_tv {beta_tv}"


  estimate_model_sequence_emid:
    parameters:
      bin_or_w: {type: string}
      regressor_name: {type: string}
      max_opt_iter: {type: float, default: 15000}
      unit_meas: {type: float, default: 10000.0}
      train_fract: {type: float, default: 0.75}
  
    command: "python estimate_model_sequence_emid.py  --bin_or_w {bin_or_w} --max_opt_iter {max_opt_iter} --unit_meas {unit_meas} --train_fract {train_fract} --regressor_name {regressor_name}"

    # mlflow run -e estimate_model_sequence_emid.py --no-conda --experiment-name "emid est paper" . -P bin_or_w=w -P regressor_name=eonia
  
  estimate_all_models_emid_parallel:
    parameters:
      max_opt_iter: {type: float, default: 15000}
      unit_meas: {type: float, default: 10000.0}
      train_fract: {type: float, default: 0.75}
      
    command: "python estimate_all_models_emid_parallel.py  --max_opt_iter {max_opt_iter} --unit_meas {unit_meas} --train_fract {train_fract} "


  
